---
layout: post
title: Testing objects for equality - Error, was given a £5 note, but was expecting a £5 note
---

<p>Imagine you are at the cash register. There is a long line of customers impatient to be served waiting behind you. The cost of your shopping is £5. However, you have twelve £5 notes in your wallet, and in this alternate universe it matters which one you use to pay for your shopping. None of them are the same. None of them can be substituted for another one.</p>

<p>How annoying would this be?</p>

<p>This is the problem that happens when we are trying to test for object equality using test assertions. Every object is different, so you can't ask if this £5 object is the same as another £5 object, because they are not the same.</p>

<p>The typical way around this is to look inside the £5 note and get it's value, then we do the same for the other £5 note and compare whether the values are the same. This works, but violates the encapsulation principle (and is mighty inconvenient).</p>

<p>In the <a href="https://pragprog.com/book/tpp20/the-pragmatic-programmer-20th-anniversary-edition" target="_blank">Pragmatic Programmer</a>, there is a story about a paper boy who knocks on your door and tells you that your paper amounts to £2. He then proceeds to open your wallet and takes your money without permission. This is a violation of your privacy (encapsulation). What the paper boy should have done is <em>tell</em> you that your paper cost £2. Then you could go into your own wallet, retrive your money and give it to him.</p>

<p>Using a test assertion to compare the values of two objects is like a paperboy who reaches into your wallet, then reachies into your neighbours wallet to compare your cash.</p>

<p>The reason we write test assertions like this is because of an error message that shows up when you are trying to check that two objects we want to be recognised as the same:</p>

<p><em>Error: Was given a £5 note, but was expecting a £5 note</em></p>

<p>We can resolve this error in a way that doesn't violate the encapsulation principle. After we have done this, we can write test assertions like this: "Expect this £5 note to be the same as this £5 note", which is what most of us naturally tried to do in the first place.</p>

